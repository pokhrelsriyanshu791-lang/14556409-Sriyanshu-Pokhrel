{% extends 'base.html' %}
{% block content %}
  <h2>Frequently Bought Together</h2>
  <p class="text-muted">Top bundle recommendations based on customer purchase patterns</p>
  {% if rows and rows|length > 0 %}
    <div class="table-responsive">
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th>Product A</th>
            <th>Product B</th>
            <th>Confidence</th>
            <th>Lift</th>
            <th>Count</th>
          </tr>
        </thead>
        <tbody>
          {% for r in rows %}
          <tr>
            <td><strong>{{ r['Product_A'] }}</strong></td>
            <td>{{ r['Product_B'] }}</td>
            <td>
              <span class="badge bg-primary">{{ "%.1f"|format(r['Confidence'] * 100) }}%</span>
              <small class="text-muted d-block">{{ "%.1f"|format(r['Confidence'] * 100) }}% of {{ r['Product_A'] }} buyers also buy {{ r['Product_B'] }}</small>
            </td>
            <td>
              {% if r['Lift'] > 1 %}
                <span class="badge bg-success">Strong ({{ "%.2f"|format(r['Lift']) }})</span>
              {% elif r['Lift'] > 0.5 %}
                <span class="badge bg-warning">Moderate ({{ "%.2f"|format(r['Lift']) }})</span>
              {% else %}
                <span class="badge bg-secondary">Weak ({{ "%.2f"|format(r['Lift']) }})</span>
              {% endif %}
            </td>
            <td>{{ r['Count'] }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <div class="mt-3">
      <small class="text-muted">
        <strong>Confidence:</strong> Percentage of times Product A buyers also bought Product B<br>
        <strong>Lift:</strong> How much more likely the pair occurs together compared to random chance (>1 = strong bundle, <1 = weak)
      </small>
    </div>
  {% else %}
    <p>No bundle suggestions available.</p>
  {% endif %}
{% endblock %}


