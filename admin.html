{% extends 'base.html' %}
{% block content %}
  <h3>Admin Dashboard</h3>
  
  <div class="mb-3">
    <a class="btn btn-primary me-2" href="/admin/users">Manage Users</a>
    <a class="btn btn-info me-2" href="/admin/sales">View Sales</a>
    <a class="btn btn-success me-2" href="/inventory">Inventory Management</a>
    <a class="btn btn-warning" href="/forecast">Demand Forecasting</a>
  </div>

  <h5 class="mt-3">Add Product</h5>
  <form method="post" action="/admin/add" class="row g-2">
    <div class="col-md-2"><input class="form-control" name="name" placeholder="Name" required /></div>
    <div class="col-md-2">
      <select class="form-select" name="section" required>
        {% for s in sections %}<option value="{{ s }}">{{ s }}</option>{% endfor %}
      </select>
    </div>
    <div class="col-md-2"><input class="form-control" name="price" type="number" step="0.01" placeholder="Price" required /></div>
    <div class="col-md-2"><input class="form-control" name="stock" type="number" placeholder="Stock" required /></div>
    <div class="col-md-3"><input class="form-control" name="description" placeholder="Description" /></div>
    <div class="col-md-1"><button class="btn btn-success w-100" type="submit">Add</button></div>
  </form>

  <h5 class="mt-4">Products</h5>
  <div class="table-responsive">
    <table class="table table-striped table-hover">
      <thead><tr><th>ID</th><th>Name</th><th>Section</th><th>Price</th><th>Stock</th><th>Description</th><th>Actions</th></tr></thead>
      <tbody>
        {% for p in products %}
        <tr>
          <form method="post" action="/admin/edit">
            <td><input class="form-control form-control-sm" name="product_id" value="{{ p['product_id'] }}" readonly /></td>
            <td><input class="form-control form-control-sm" name="name" value="{{ p['name'] }}" /></td>
            <td>
              <select class="form-select form-select-sm" name="section">
                {% for s in sections %}
                <option value="{{ s }}" {% if s == p['section'] %}selected{% endif %}>{{ s }}</option>
                {% endfor %}
              </select>
            </td>
            <td><input class="form-control form-control-sm" name="price" type="number" step="0.01" value="{{ p['price'] }}" /></td>
            <td><input class="form-control form-control-sm" name="stock" type="number" value="{{ p['stock'] }}" /></td>
            <td><input class="form-control form-control-sm" name="description" value="{{ p['description'] }}" /></td>
            <td class="d-flex">
              <button class="btn btn-sm btn-primary me-2" type="submit">Save</button>
          </form>
          <form method="post" action="/admin/delete">
              <input type="hidden" name="product_id" value="{{ p['product_id'] }}" />
              <button class="btn btn-sm btn-outline-danger" type="submit">Delete</button>
          </form>
            </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endblock %}


