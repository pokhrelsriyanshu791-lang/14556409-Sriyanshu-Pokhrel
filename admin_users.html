{% extends 'base.html' %}
{% block content %}
  <h3>User Management</h3>
  
  {% if users and users|length > 0 %}
    <div class="table-responsive">
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th>Username</th>
            <th>Role</th>
            <th>Email</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for user in users %}
          <tr>
            <td>{{ user['username'] }}</td>
            <td>{{ user['role'] }}</td>
            <td>{{ user['email'] }}</td>
            <td>
              <div class="d-flex gap-2">
                <form method="post" action="/admin/users/reset" class="d-inline">
                  <input type="hidden" name="username" value="{{ user['username'] }}" />
                  <button class="btn btn-sm btn-warning" type="submit">Reset Password</button>
                </form>
                <form method="post" action="/admin/users/set" class="d-inline">
                  <input type="hidden" name="username" value="{{ user['username'] }}" />
                  <input type="password" name="new_password" placeholder="New password" class="form-control form-control-sm d-inline-block" style="width: 150px;" maxlength="10" minlength="6" required />
                  <button class="btn btn-sm btn-success" type="submit">Set Password</button>
                </form>
              </div>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <p>No users found.</p>
  {% endif %}
  
  <a class="btn btn-secondary" href="/admin">Back to Admin Dashboard</a>
{% endblock %}
